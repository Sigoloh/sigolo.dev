var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{ref as o,reactive as i,readonly as s,computed as l,h as u,TransitionGroup as d,Transition as p,inject as c}from"vue";const f=o([]),v=o(null),m=o(null),g=o(null),h=i({current:""}),y=[],b=o(!1),k=s(f),w=s(v),M=s(m),q=s(g),x=s(h),$=(e=w.value)=>{h.current=e;const t=k.value.findIndex((t=>t.name===e)),n=k.value.map((e=>e.name));for(let a=0;a<n.length;a++){if(a>0&&a<n.length-1){const e=n[a]+"Minus",r=n[a]+"Plus";h[e]=t<=a,h[r]=t>=a}h[n[a]]=n[a]===e}},V=(e=M.value)=>{h.orientation=e,h.isLandscape="landscape"===e,h.isPortrait="portrait"===e},O=(e=q.value||"light")=>{h.theme=e,h.isDark="dark"===e,h.isLight="light"===e};function j(e,t){if("undefined"==typeof window||!window.matchMedia)return!1;if("undefined"!=typeof window&&!window.matchMedia)return console.error("Vue3 Mq: No MatchMedia support detected in this browser. Responsive breakpoints not available."),!1;{b.value=!0;const n=window.matchMedia(e),a=({matches:e})=>{e&&t()};y.push({mql:n,cb:a});n.addEventListener&&"function"==typeof n.addEventListener?n.addEventListener("change",a):n.addListener(a),a(n)}}const B=e=>k.value.some((t=>t.name===e)),E=(e,t)=>{const n=t.value.map((e=>e.name));if(e){if(Array.isArray(e))return e.filter((e=>B(e)));if("string"==typeof e&&/\w+\+$/.test(e)){if(e=e.replace(/\+$/,""),!1===B(e))return console.error(`Vue3 Mq: ${e} is not a valid breakpoint key. Invalid range.`),n;const a=t.value.findIndex((t=>t.name===e));return t.value.slice(a).map((e=>e.name))}if("string"==typeof e&&/\w+-$/.test(e)){if(e=e.replace(/-$/,""),!1===B(e))return console.error(`Vue3 Mq: ${e} is not a valid breakpoint key. Invalid range.`),n;const a=t.value.findIndex((t=>t.name===e));return t.value.slice(0,a+1).map((e=>e.name))}if("string"==typeof e&&/^\w+-\w+$/.test(e)){const[a,r]=e.split("-");if(!1===B(a))return console.error(`Vue3 Mq: ${a} is not a valid breakpoint key. Invalid range.`),n;if(!1===B(r))return console.error(`Vue3 Mq: ${r} is not a valid breakpoint key. Invalid range.`),n;const o=t.value.findIndex((e=>e.name===a)),i=t.value.findIndex((e=>e.name===r));return t.value.slice(o,i+1).map((e=>e.name))}return"string"==typeof e&&!0===B(e)?[e]:n}return n},I=(e,t)=>{const n=[];return e||t?(e&&n.push("landscape"),t&&n.push("portrait"),n):["landscape","portrait"]},S=(e,t)=>{const n=[];return t||e?(t&&n.push("light"),e&&n.push("dark"),n):["light","dark"]};var L=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bootstrap5:{xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400},bootstrap4:{xs:0,sm:576,md:768,lg:992,xl:1200},bootstrap3:{xs:0,sm:768,md:992,lg:1200},vuetify:{xs:0,sm:600,md:960,lg:1264,xl:1904},tailwind:{xs:0,sm:640,md:768,lg:1024,xl:1280,xxl:1536},devices:{phone:0,tablet:768,laptop:1370,desktop:1906}});const T=e=>{if(!e||"object"!=typeof e)return!1;const t=[];for(let n in e){const a=parseFloat(e[n]);n&&"string"==typeof n?/^[^a-z]/i.test(n)||/[^a-zA-Z0-9_]/.test(n)?console.warn(`Vue3 Mq: "${n}" is an invalid breakpoint key. Breakpoint keys must start with a letter and contain only alphanumeric characters and underscores. Skipping.`):!a&&0!==a||isNaN(a)||a<0?console.warn(`Vue3 Mq: "${n}: ${e[n]}" is not a valid breakpoint. Breakpoints should be a number of zero or above. Skipping.`):t.push({name:n,min:a}):console.warn(`Vue3 Mq: Invalid or missing breakpoint key (${JSON.stringify(n)}). Skipping.`)}t.some((e=>0===e.min))||console.warn("Vue3 Mq: You have not declared a breakpoint with a minimum value of 0. There may be screen sizes to which Vue3Mq does not respond.");return new Set(t.map((e=>e.min))).size<t.length&&console.warn("Vue3 Mq: Your breakpoint configuration contains duplicate values. Behaviour may be unpredictable."),0!==t.length&&t.sort(((e,t)=>e.min-t.min))},z=e=>{const t=e.split(":"),n={};for(let a of t)!1!==/\D/.test(a)&&(["landscape","portrait"].includes(a)?n.slotOrientation=a:["light","dark"].includes(a)?n.slotTheme=a:n.slotBp=a);return n},P={name:"fade",mode:"out-in"};var A={name:"MqResponsive",props:{target:[String,Array],landscape:{type:Boolean,default:!1},portrait:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},light:{type:Boolean,default:!1},tag:{type:String,default:"div"},listTag:{type:String,default:"div"},group:{type:Boolean,default:!1}},setup(e,{attrs:o,emit:i,slots:s}){const c=l((()=>E(e.target,k))),f=l((()=>I(e.landscape,e.portrait))),v=l((()=>S(e.dark,e.light))),m=l((()=>c.value.includes(x.current)&&f.value.includes(x.orientation)&&v.value.includes(x.theme)));return s.default?()=>m.value?u(e.tag,((e,o)=>{for(var i in o||(o={}))n.call(o,i)&&r(e,i,o[i]);if(t)for(var i of t(o))a.call(o,i)&&r(e,i,o[i]);return e})({},o),s.default()):void 0:()=>{const t=Object.assign({},P,o,{tag:e.tag}),n=e.group?d:p;return u(n,t,(()=>(t=>{if(!e.group&&s.length>0)return s;const n=[];for(let e in s){const{slotBp:a,slotOrientation:r,slotTheme:o}=z(e),i=l((()=>E(a,k))),d=l((()=>I("landscape"===r,"portrait"===r))),p=l((()=>S("dark"===o,"light"===o)));!0===l((()=>i.value.includes(x.current)&&d.value.includes(x.orientation)&&p.value.includes(x.theme))).value&&n.push(u(t||s[e],{key:e},t?s[e]():void 0))}return n.length>0?n:void 0})(e.listTag)))}}};function R({breakpoints:e,preset:t}){const n=(e=>{if("string"==typeof e&&L[e])return L[e];{const t=Object.keys(L);return console.error(`Vue3 Mq: "${e}" is not a valid preset. Available options are: ${t.join(", ")}`),!1}})(t),a=T(e);if(!1===n&&!a)throw new TypeError("Vue3 Mq: You must provide a valid preset, or valid breakpoint settings.");var r;r=a||T(n),f.value=r,function(){for(;y.length>0;){const e=y.shift();if(e&&"object"==typeof e){const{mql:t,cb:n}=e;t.addEventListener&&"function"==typeof t.addEventListener?t.removeEventListener("change",n):t.removeListener(n)}}}(),(()=>{const e=Object.keys(h);for(let t of e)delete h[t];$(),V(),O()})();const o=k.value.reduce(((e,t,n,a)=>{const r=`(min-width: ${t.min}px)`,o=n<a.length-1?`(max-width: ${a[n+1].min-1}px)`:null,i=r+(o?" and "+o:"");return Object.assign(e,{[t.name]:i})}),{});for(const i in o){j(o[i],(()=>{$(i)}))}["portrait","landscape"].forEach((e=>{j(`(orientation: ${e})`,(()=>{V(e)}))})),["light","dark"].forEach((e=>{j(`(prefers-color-scheme: ${e})`,(()=>{O(e)}))}))}function _(){const e=c("mq");if(e)return e;throw new Error("Vue3Mq is not installed in this app. Please follow the installation instructions and try again.")}var N={install:(e,{preset:t="bootstrap5",breakpoints:n,defaultBreakpoint:a,defaultOrientation:r="landscape",defaultTheme:o}={})=>{try{const l=!1===["landscape","portrait"].includes(s=r)?(console.error(`Vue3 Mq: "${s}" is not a valid default orientation. Reverting to unset value.`),null):s,u=((e=null)=>!1===["dark","light"].includes(e)&&null!==e?(console.error(`Vue3 Mq: "${e}" is not a valid default theme. Reverting to unset value.`),null):e)(o);i=a,v.value=i,(e=>{m.value=e})(l),(e=>{g.value=e})(u),e.provide("mq",x),e.provide("updateBreakpoints",R),R({breakpoints:n,preset:t})}catch(l){console.error(l)}var i,s}};export{A as MqResponsive,N as Vue3Mq,k as availableBreakpoints,R as updateBreakpoints,_ as useMq};
