"use strict";var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;Object.defineProperty(exports,"__esModule",{value:!0}),exports[Symbol.toStringTag]="Module";var o=require("vue");const i=o.ref([]),s=o.ref(null),l=o.ref(null),u=o.ref(null),d=o.reactive({current:""}),p=[],c=o.ref(!1),f=o.readonly(i),v=o.readonly(s),m=o.readonly(l),g=o.readonly(u),h=o.readonly(d),y=(e=v.value)=>{d.current=e;const t=f.value.findIndex((t=>t.name===e)),n=f.value.map((e=>e.name));for(let r=0;r<n.length;r++){if(r>0&&r<n.length-1){const e=n[r]+"Minus",a=n[r]+"Plus";d[e]=t<=r,d[a]=t>=r}d[n[r]]=n[r]===e}},b=(e=m.value)=>{d.orientation=e,d.isLandscape="landscape"===e,d.isPortrait="portrait"===e},k=(e=g.value||"light")=>{d.theme=e,d.isDark="dark"===e,d.isLight="light"===e};function w(e,t){if("undefined"==typeof window||!window.matchMedia)return!1;if("undefined"!=typeof window&&!window.matchMedia)return console.error("Vue3 Mq: No MatchMedia support detected in this browser. Responsive breakpoints not available."),!1;{c.value=!0;const n=window.matchMedia(e),r=({matches:e})=>{e&&t()};p.push({mql:n,cb:r});n.addEventListener&&"function"==typeof n.addEventListener?n.addEventListener("change",r):n.addListener(r),r(n)}}const M=e=>f.value.some((t=>t.name===e)),x=(e,t)=>{const n=t.value.map((e=>e.name));if(e){if(Array.isArray(e))return e.filter((e=>M(e)));if("string"==typeof e&&/\w+\+$/.test(e)){if(e=e.replace(/\+$/,""),!1===M(e))return console.error(`Vue3 Mq: ${e} is not a valid breakpoint key. Invalid range.`),n;const r=t.value.findIndex((t=>t.name===e));return t.value.slice(r).map((e=>e.name))}if("string"==typeof e&&/\w+-$/.test(e)){if(e=e.replace(/-$/,""),!1===M(e))return console.error(`Vue3 Mq: ${e} is not a valid breakpoint key. Invalid range.`),n;const r=t.value.findIndex((t=>t.name===e));return t.value.slice(0,r+1).map((e=>e.name))}if("string"==typeof e&&/^\w+-\w+$/.test(e)){const[r,a]=e.split("-");if(!1===M(r))return console.error(`Vue3 Mq: ${r} is not a valid breakpoint key. Invalid range.`),n;if(!1===M(a))return console.error(`Vue3 Mq: ${a} is not a valid breakpoint key. Invalid range.`),n;const o=t.value.findIndex((e=>e.name===r)),i=t.value.findIndex((e=>e.name===a));return t.value.slice(o,i+1).map((e=>e.name))}return"string"==typeof e&&!0===M(e)?[e]:n}return n},q=(e,t)=>{const n=[];return e||t?(e&&n.push("landscape"),t&&n.push("portrait"),n):["landscape","portrait"]},$=(e,t)=>{const n=[];return t||e?(t&&n.push("light"),e&&n.push("dark"),n):["light","dark"]};var V=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bootstrap5:{xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400},bootstrap4:{xs:0,sm:576,md:768,lg:992,xl:1200},bootstrap3:{xs:0,sm:768,md:992,lg:1200},vuetify:{xs:0,sm:600,md:960,lg:1264,xl:1904},tailwind:{xs:0,sm:640,md:768,lg:1024,xl:1280,xxl:1536},devices:{phone:0,tablet:768,laptop:1370,desktop:1906}});const O=e=>{if(!e||"object"!=typeof e)return!1;const t=[];for(let n in e){const r=parseFloat(e[n]);n&&"string"==typeof n?/^[^a-z]/i.test(n)||/[^a-zA-Z0-9_]/.test(n)?console.warn(`Vue3 Mq: "${n}" is an invalid breakpoint key. Breakpoint keys must start with a letter and contain only alphanumeric characters and underscores. Skipping.`):!r&&0!==r||isNaN(r)||r<0?console.warn(`Vue3 Mq: "${n}: ${e[n]}" is not a valid breakpoint. Breakpoints should be a number of zero or above. Skipping.`):t.push({name:n,min:r}):console.warn(`Vue3 Mq: Invalid or missing breakpoint key (${JSON.stringify(n)}). Skipping.`)}t.some((e=>0===e.min))||console.warn("Vue3 Mq: You have not declared a breakpoint with a minimum value of 0. There may be screen sizes to which Vue3Mq does not respond.");return new Set(t.map((e=>e.min))).size<t.length&&console.warn("Vue3 Mq: Your breakpoint configuration contains duplicate values. Behaviour may be unpredictable."),0!==t.length&&t.sort(((e,t)=>e.min-t.min))},j=e=>{const t=e.split(":"),n={};for(let r of t)!1!==/\D/.test(r)&&(["landscape","portrait"].includes(r)?n.slotOrientation=r:["light","dark"].includes(r)?n.slotTheme=r:n.slotBp=r);return n},B={name:"fade",mode:"out-in"};var S={name:"MqResponsive",props:{target:[String,Array],landscape:{type:Boolean,default:!1},portrait:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},light:{type:Boolean,default:!1},tag:{type:String,default:"div"},listTag:{type:String,default:"div"},group:{type:Boolean,default:!1}},setup(e,{attrs:i,emit:s,slots:l}){const u=o.computed((()=>x(e.target,f))),d=o.computed((()=>q(e.landscape,e.portrait))),p=o.computed((()=>$(e.dark,e.light))),c=o.computed((()=>u.value.includes(h.current)&&d.value.includes(h.orientation)&&p.value.includes(h.theme)));return l.default?()=>c.value?o.h(e.tag,((e,o)=>{for(var i in o||(o={}))n.call(o,i)&&a(e,i,o[i]);if(t)for(var i of t(o))r.call(o,i)&&a(e,i,o[i]);return e})({},i),l.default()):void 0:()=>{const t=Object.assign({},B,i,{tag:e.tag}),n=e.group?o.TransitionGroup:o.Transition;return o.h(n,t,(()=>(t=>{if(!e.group&&l.length>0)return l;const n=[];for(let e in l){const{slotBp:r,slotOrientation:a,slotTheme:i}=j(e),s=o.computed((()=>x(r,f))),u=o.computed((()=>q("landscape"===a,"portrait"===a))),d=o.computed((()=>$("dark"===i,"light"===i)));!0===o.computed((()=>s.value.includes(h.current)&&u.value.includes(h.orientation)&&d.value.includes(h.theme))).value&&n.push(o.h(t||l[e],{key:e},t?l[e]():void 0))}return n.length>0?n:void 0})(e.listTag)))}}};function E({breakpoints:e,preset:t}){const n=(e=>{if("string"==typeof e&&V[e])return V[e];{const t=Object.keys(V);return console.error(`Vue3 Mq: "${e}" is not a valid preset. Available options are: ${t.join(", ")}`),!1}})(t),r=O(e);if(!1===n&&!r)throw new TypeError("Vue3 Mq: You must provide a valid preset, or valid breakpoint settings.");var a;a=r||O(n),i.value=a,function(){for(;p.length>0;){const e=p.shift();if(e&&"object"==typeof e){const{mql:t,cb:n}=e;t.addEventListener&&"function"==typeof t.addEventListener?t.removeEventListener("change",n):t.removeListener(n)}}}(),(()=>{const e=Object.keys(d);for(let t of e)delete d[t];y(),b(),k()})();const o=f.value.reduce(((e,t,n,r)=>{const a=`(min-width: ${t.min}px)`,o=n<r.length-1?`(max-width: ${r[n+1].min-1}px)`:null,i=a+(o?" and "+o:"");return Object.assign(e,{[t.name]:i})}),{});for(const i in o){w(o[i],(()=>{y(i)}))}["portrait","landscape"].forEach((e=>{w(`(orientation: ${e})`,(()=>{b(e)}))})),["light","dark"].forEach((e=>{w(`(prefers-color-scheme: ${e})`,(()=>{k(e)}))}))}var I={install:(e,{preset:t="bootstrap5",breakpoints:n,defaultBreakpoint:r,defaultOrientation:a="landscape",defaultTheme:o}={})=>{try{const p=!1===["landscape","portrait"].includes(d=a)?(console.error(`Vue3 Mq: "${d}" is not a valid default orientation. Reverting to unset value.`),null):d,c=((e=null)=>!1===["dark","light"].includes(e)&&null!==e?(console.error(`Vue3 Mq: "${e}" is not a valid default theme. Reverting to unset value.`),null):e)(o);i=r,s.value=i,(e=>{l.value=e})(p),(e=>{u.value=e})(c),e.provide("mq",h),e.provide("updateBreakpoints",E),E({breakpoints:n,preset:t})}catch(p){console.error(p)}var i,d}};exports.MqResponsive=S,exports.Vue3Mq=I,exports.availableBreakpoints=f,exports.updateBreakpoints=E,exports.useMq=function(){const e=o.inject("mq");if(e)return e;throw new Error("Vue3Mq is not installed in this app. Please follow the installation instructions and try again.")};
